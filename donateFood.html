<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css">
    <title>Donate Food</title>
</head>
<body>
    <div class="Box_container">
        <section class="register_title">
            <div class="register">
                <h1>Donate <span>a Bit</span></h1>
            </div>
            <p><h3>It’s Not How Much We Give, But How Much Love We Put in Giving</h3></p>
        </section>

        <section class="registration_form">
            <label for="name"><h3>Your Name</h3></label>
            <input type="text" id="name" placeholder="Name" /><br>

            <label for="email"><h3>Email</h3></label>
            <input type="email" id="email" placeholder="Your Email"><br>

            <label for="address"><h3>Address</h3></label>
            <input type="text" id="address" placeholder="Address" /><br>

            <label for="phn_no"><h3>Phone Number</h3></label>
            <input type="text" id="phn_no" placeholder="Phone Number" /><br>

            <div class="category">
                <h3>Category</h3><br>
                <label><input type="radio" name="Category" value="Veg"> Veg</label><br>
                <label><input type="radio" name="Category" value="Non-Veg"> Non-Veg</label><br>
                <label><input type="radio" name="Category" value="Both"> Both</label><br>
            </div>

            <div class="expiry_date">
                <label for="Expiry_Date"><h3>Expiry Date:</h3></label>
                <input type="date" id="Expiry_Date" name="Expiry_Date"><br>
            </div>

            <label for="quantity"><h3>Quantity:</h3></label>
            <input type="number" id="quantity" value="1" min="1"><br>

            <label for="Note"></label>
            <input type="text" id="Note" placeholder="Special Note"><br>

            <div class="checkbox-container">
                <label><input type="checkbox" id="checkbox" required> I accept the terms & conditions.</label>
            </div>
        </section>

        <button class="Submitbtn" id="donateBtn">Donate Now</button>

        <section class="foot">
            <footer>
                <p>| Copyright © 2025 FoodDesk | All Rights Reserved.</p>
            </footer>
        </section>
    </div>

    <!-- ✅ Firebase Integration Script -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAK_UXQUklE5iT3Zed8JQpgbfa6e72n9LA",
            authDomain: "wastenot-2b432.firebaseapp.com",
            projectId: "wastenot-2b432",
            storageBucket: "wastenot-2b432.appspot.com",
            messagingSenderId: "1010451709978",
            appId: "1:1010451709978:web:a5a59f3139a42860a8d1a3",
            measurementId: "G-XMKQY4KMYC"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        document.getElementById("donateBtn").addEventListener("click", async () => {
            const name = document.getElementById("name").value;
            const email = document.getElementById("email").value;
            const phone = document.getElementById("phn_no").value;
            const address = document.getElementById("address").value;
            const category = document.querySelector("input[name='Category']:checked")?.value;
            const expiryDate = document.getElementById("Expiry_Date").value;
            const quantity = document.getElementById("quantity").value;
            const note = document.getElementById("Note").value;
            const termsAccepted = document.getElementById("checkbox").checked;

            // Validate all required fields
            if (!name || !email || !phone || !address || !category || !expiryDate || !quantity || !termsAccepted) {
                alert("Please fill all required fields and accept the terms.");
                return;
            }

            const donationData = {
                name,
                email,
                phone,
                address,
                category,
                expiryDate,
                quantity,
                note
            };

            try {
                await addDoc(collection(db, "donations"), donationData);
                alert("Successfully Donated!");
                window.location.href = "viewDonations.html";
            } catch (error) {
                console.error("Error saving donation:", error);
                alert("Error saving donation. Check console for details.");
            }
        });
    </script>
</body>
</html>
